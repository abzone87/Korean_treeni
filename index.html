<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Korean Vocabulary Practice</title>
</head>
<body style="font-family: sans-serif; padding: 1em; max-width: 600px; margin: auto;">
  <h1 style="text-align: center;">Korean Vocabulary Practice</h1>
  <div style="display: flex; flex-wrap: wrap; justify-content: center; gap: 0.5em;">
    <button onclick="setMode('mc-ko-en')">Korean â†’ English (MC)</button>
    <button onclick="setMode('mc-en-ko')">English â†’ Korean (MC)</button>
    <button onclick="setMode('write-ko-en')">Korean â†’ English (Write)</button>
    <button onclick="setMode('write-en-ko')">English â†’ Korean (Write)</button>
    <button onclick="setMode('listen-ko-en')">ðŸŽ§ Listen â†’ English</button>
  </div>
  <hr>
  <div id="practiceArea" style="text-align: center; margin-top: 1em;"></div>

  <script>
    const words = [
      { "korean": "ì‚¬ëž‘", "english": "Love" },
      { "korean": "í•™êµ", "english": "School" },
      { "korean": "ì¹œêµ¬", "english": "Friend" },
      { "korean": "ìŒì‹", "english": "Food" },
      { "korean": "í–‰ë³µ", "english": "Happiness" }
    ];

    let current = {};
    let mode = '';

    function setMode(m) {
      mode = m;
      nextQuestion();
    }

    function nextQuestion() {
      current = words[Math.floor(Math.random() * words.length)];
      const area = document.getElementById('practiceArea');
      area.innerHTML = '';

      if (mode === 'mc-ko-en' || mode === 'mc-en-ko') {
        const question = document.createElement('div');
        question.style.fontSize = '1.5em';
        question.style.marginBottom = '1em';
        question.textContent = mode === 'mc-ko-en' ? current.korean : current.english;
        area.appendChild(question);

        const options = shuffle([current, ...getRandomOptions(3)]);
        options.forEach(opt => {
          const btn = document.createElement('button');
          btn.textContent = mode === 'mc-ko-en' ? opt.english : opt.korean;
          btn.style.display = 'block';
          btn.style.margin = '0.5em auto';
          btn.onclick = () => alert((opt === current) ? 'Correct!' : 'Wrong!');
          area.appendChild(btn);
        });

      } else if (mode === 'write-ko-en' || mode === 'write-en-ko') {
        const question = document.createElement('div');
        question.style.fontSize = '1.5em';
        question.style.marginBottom = '1em';
        question.textContent = mode === 'write-ko-en' ? current.korean : current.english;
        area.appendChild(question);

        const input = document.createElement('input');
        input.type = 'text';
        input.style.width = '80%';
        input.style.marginBottom = '0.5em';
        area.appendChild(input);

        const btn = document.createElement('button');
        btn.textContent = 'Check';
        btn.onclick = () => {
          const answer = input.value.trim();
          const correct = mode === 'write-ko-en' ? current.english : current.korean;
          alert(answer === correct ? 'Correct!' : 'Wrong! Correct answer: ' + correct);
        };
        area.appendChild(btn);

      } else if (mode === 'listen-ko-en') {
        const utterance = new SpeechSynthesisUtterance(current.korean);
        utterance.lang = 'ko-KR';
        speechSynthesis.speak(utterance);

        const question = document.createElement('div');
        question.style.fontSize = '1.2em';
        question.style.marginBottom = '1em';
        question.textContent = 'What is the meaning of the spoken Korean word?';
        area.appendChild(question);

        const options = shuffle([current, ...getRandomOptions(3)]);
        options.forEach(opt => {
          const btn = document.createElement('button');
          btn.textContent = opt.english;
          btn.style.display = 'block';
          btn.style.margin = '0.5em auto';
          btn.onclick = () => alert((opt === current) ? 'Correct!' : 'Wrong!');
          area.appendChild(btn);
        });
      }
    }

    function getRandomOptions(n) {
      const shuffled = words.filter(w => w !== current).sort(() => 0.5 - Math.random());
      return shuffled.slice(0, n);
    }

    function shuffle(array) {
      return array.sort(() => Math.random() - 0.5);
    }

    window.onload = () => {
      setMode('mc-ko-en');
    };
  </script>
</body>
</html>

